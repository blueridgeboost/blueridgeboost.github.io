<!-- JavaScript and dependencies -->

{{ $bootstrap := resources.Get "js/bootstrap.bundle.min.js" }}
{{ $ls := resources.Get "lazysizes/lazysizes.js" }}

{{ if hugo.IsProduction }} 
  {{ $js := slice $bootstrap $ls | resources.Concat "js/bundle.min.js" | js.Build  }}
  <script defer type="text/javascript" src="{{ $js.RelPermalink }}"></script>
{{ else }}
  {{ $js := slice $bootstrap $ls | resources.Concat "js/bundle.js" | js.Build  }}
  <script defer type="text/javascript" src="{{ $js.RelPermalink }}"></script>
{{ end }}

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id={{ site.Config.Services.GoogleAnalytics.ID }}"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', "{{ site.Config.Services.GoogleAnalytics.ID }}");
</script>
